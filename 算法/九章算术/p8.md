<!-- { "loadSidebar": true } -->
　　淳风等按：祖暅之谓刘徽、张衡二人皆以圆囷为方率，丸为圆率，乃设新法。祖暅之开立圆术曰：“以二乘积，开立方除之，即立圆径。其意何也？取立方棋一枚，令立枢于左后之下隅，从规去其右上之廉；又合而衡规之，去其前上之廉。于是立方之棋分而为四，规内棋一，谓之内棋；规外棋三，谓之外棋。

　　规更合四棋，复横断之。以句股言之，令余高为句，内棋断上方为股，本方之数，其弦也。句股之法：以句幂减弦幂，则余为股幂。若令余高自乘，减本方之幂，余即内棋断上方之幂也。本方之幂即此四棋之断上幂。然则余高自乘，即外三棋之断上幂矣。不问高卑，势皆然也。然固有所归同而途殊者尔。而乃控远以演类，借况以析微。按：阳马方高数参等者，倒而立之，横截去上，则高自乘与断上幂数亦等焉。夫叠棋成立积，缘幂势既同，则积不容异。由此观之，规之外三棋旁蹙为一，即一阳马也。三分立方，则阳马居一，内棋居二可知矣。合八小方成一大方，合八内棋成一合盖。内棋居小方三分之二，则合盖居立方亦三分之二，较然验矣。置三分之二，以圆幂率三乘之，如方幂率四而一，约而定之，以为丸率。

　　故曰丸居立方二分之一也。”等数既密，心亦昭晢。张衡放旧，贻哂于后，刘徽循故，未暇校新。夫岂难哉，抑未之思也。依密率，此立圆积，本以圆径再自乘，十一乘之，二十一而一，得此积。今欲求其本积，故以二十一乘之，十一而一。

　　凡物再自乘，开立方除之，复其本数。故立方除之，即丸径也。〕

　　卷五

　　○商功（以御功程积实）

　　今有穿地，积一万尺。问为坚、壤各几何？答曰：为坚七千五百尺；为壤一万二千五百尺。

　　术曰：穿地四为壤五，〔壤谓息土。〕

　　为坚三，〔坚谓筑土。〕

　　为墟四。

　　〔墟谓穿坑。此皆其常率。〕

　　以穿地求壤，五之；求坚，三之；皆四而一。

　　〔今有术也。〕

　　以壤求穿，四之；求坚，三之；皆五而一。以坚求穿，四之；求壤，五之；皆三而一。

　　〔淳风等按：此术并今有之义也。重张穿地积一万尺，为所有数，坚率三、壤率五各为所求率，穿率四为所有率，而今有之，即得。〕

　　城、垣、堤、沟、堑、渠皆同术。

　　术曰：并上下广而半之，〔损广补狭。〕

　　以高若深乘之，又以袤乘之，即积尺。

　　〔按：此术“并上下广而半之”者，以盈补虚，得中平之广。“以高若深乘之”，得一头之立幂。“又以袤乘之”者，得立实之积，故为积尺。〕

　　今有穿地，袤一丈六尺，深一丈，上广六尺，为垣积五百七十六尺。问穿地下广几何？答曰：三尺五分尺之三。

　　术曰：置垣积尺，四之为实。

　　〔穿地四，为坚三。垣，坚也。以坚求穿地，当四之，三而一也。〕

　　以深、袤相乘，〔为深、袤之立实也。〕

　　又三之，为法。

　　〔以深、袤乘之立实除垣积，即坑广。又三之者，与坚率并除之。〕

　　所得，倍之。

　　〔为坑有两广，先并而半之，即为广狭之中平。今先得其中平，故又倍之知，两广全也。〕

　　减上广，余即下广。

　　〔按：此术穿地四，为坚三。垣即坚也。今以坚求穿地，当四乘之，三而一。

　　深、袤相乘者，为深袤立幂。以深袤立幂除积，即坑广。又三之，为法，与坚率并除。所得，倍之者，为坑有两广，先并而半之，为中平之广。今此得中平之广，故倍之还为两广并。故减上广，余即下广也。〕

　　今有城下广四丈，上广二丈，高五丈，袤一百二十六丈五尺。问积几何？答曰：一百八十九万七千五百尺：今有垣下广三尺，上广二尺，高一丈二尺，袤二十二丈五尺八寸。问积几何？答曰：六千七百七十四尺。

　　今有堤下广二丈，上广八尺，高四尺，袤一十二丈七尺。问积几何？答曰：七千一百一十二尺。

　　冬程人功四百四十四尺，问用徒几何？答曰：一十六人二百一十一分人之二。

　　术曰：以积尺为实，程功尺数为法，实如法而一，即用徒人数。

　　今有沟，上广一丈五尺，下广一丈，深五尺，袤七丈。问积几何？答曰：四千三百七十五尺。

　　春程人功七百六十六尺，并出土功五分之一，定功六百一十二尺五分尺之四。

　　问用徒几何？答曰：七人三千六十四分人之四百二十七。

　　术曰：置本人功，去其五分之一，余为法。

　　〔“去其五分之一”者，谓以四乘，五除也。〕

　　以沟积尺为实，实如法而一，得用徒人数。

　　〔按：此术“置本人功，去其五分之一”者，谓以四乘之，五而一，除去出土之功，取其定功。乃通分内子以为法。以分母乘沟积尺为实者，法里有分，实里通之，故实如法而一，即用徒人数。此以一人之积尺除其众尺，故用徒人数。

　　不尽者，等数约之而命分也。〕

　　今有堑，上广一丈六尺三寸，下广一丈，深六尺三寸，袤一十三丈二尺一寸。

　　问积几何？答曰：一万九百四十三尺八寸。

　　〔八寸者，谓穿地方尺，深八寸。此积余有方尺中二分四厘五毫，弃之。文欲从易，非其常定也。〕

　　夏程人功八百七十一尺，并出土功五分之一，沙砾水石之功作太半，定功二百三十二尺一十五分尺之四。问用徒几何？答曰：四十七人三千四百八十四分人之四百九。

　　术曰：置本人功，去其出土功五分之一，又去沙砾水石之功太半，余为法。

　　以堑积尺为实。实如法而一，即用徒人数。

　　〔按：此术“置本人功，去其出土功五分之一”者，谓以四乘，五除。“又去沙砾水石作太半”者，一乘，三除，存其少半，取其定功。乃通分内子以为法。

　　以分母乘堑积尺为实者，为法里有分，实里通之，故实如法而一，即用徒人数。

　　不尽者，等数约之而命分也。〕

　　今有穿渠，上广一丈八尺，下广三尺六寸，深一丈八尺，袤五万一千八百二十四尺。问积几何？答曰：一千七万四千五百八十五尺六寸。

　　秋程人功三百尺，问用徒几何？答曰：三万三千五百八十二人，功内少一十四尺四寸。

　　一千人先到，问当受袤几何？答曰：一百五十四丈三尺二寸八十一分寸之八。

　　术曰：以一人功尺数乘先到人数为实。

　　〔以一千人一日功为实。立实为功。〕

　　并渠上下广而半之，以深乘之，为法。

　　〔以渠广深之立实为法。〕

　　实如法得袤尺。

　　今有方堡壔，〔堡者，堡城也；壔，音丁老反，又音纛，谓以土拥木也。〕

　　方一丈六尺，高一丈五尺。问积几何？答曰：三千八百四十尺。

　　术曰：方自乘，以高乘之，即积尺。

　　今有圆堡瑽，周四丈八尺，高一丈一尺。问积几何？答曰：二千一百一十二尺。

　　〔于徽术，当积二千一十七尺一百五十七分尺之一百三十一。

　　淳风等按：依密率，积二千一十六尺。〕

　　术曰：周自相乘，以高乘之，十二而一。

　　〔此章诸术亦以周三径一为率，皆非也。于徽术当以周自乘，以高乘之，又以二十五乘之，三百一十四而一。此之圆幂亦如圆田之幂也。求幂亦如圆田，而以高乘幂也。

　　淳风等按：依密率，以七乘之，八十八而一。〕

　　今有方亭，下方五丈，上方四丈，高五丈。问积几何？答曰：一十万一千六百六十六尺太半尺。

　　术曰：上下方相乘，又各自乘，并之，以高乘之，三而一。

　　〔此章有堑堵、阳马，皆合而成立方。盖说算者乃立棋三品，以效高深之积。

　　假令方亭，上方一尺，下方三尺，高一尺。其用棋也，中央立方一，四面堑堵四，四角阳马四。上下方相乘为三尺，以高乘之，得积三尺，是为得中央立方一，四面堑堵各一。下方自乘为九，以高乘之，得积九尺。是为中央立方一、四面堑堵各二、四角阳马各三也。上方自乘，以高乘之，得积一尺，又为中央立方一。凡三品棋皆一而为三，故三而一，得积尺。用棋之数：立方三、堑堵阳马各十二，凡二十七，棋十三。更差次之，而成方亭者三，验矣。为术又可令方差自乘，以高乘之，三而一，即四阳马也；上下方相乘，以高乘之，即中央立方及四面堑堵也。并之，以为方亭积数也。〕

　　今有圆亭，下周三丈，上周二丈，高一丈。问积几何？答曰：五百二十七尺九分尺之七。

　　〔于徽术，当积五百四尺四百七十一分尺之一百一十六也。

　　淳风等按：依密率，为积五百三尺三十三分尺之二十六。〕

　　术曰：上下周相乘，又各自乘，并之，以高乘之，三十六而一。

　　〔此术周三径一之义。合以三除上下周，各为上下径。以相乘，又各自乘，并，以高乘之，三而一，为方亭之积。假令三约上下周俱不尽，还通之，即各为上下径。令上下径相乘，又各自乘，并，以高乘之，为三方亭之积分。此合分母三相乘得九，为法，除之。又三而一，得方亭之积。从方亭求圆亭之积，亦犹方幂中求圆幂。乃令圆率三乘之，方率四而一，得圆亭之积。前求方亭之积，乃以三而一；今求圆亭之积，亦合三乘之。二母既同，故相准折，惟以方幂四乘分母九，得三十六，而连除之。于徽术，当上下周相乘，又各自乘，并，以高乘之，又二十五乘之，九百四十二而一。此方亭四角圆杀，比于方亭，二百分之一百五十七。为术之意，先作方亭，三而一。则此据上下径为之者，当又以一百五十七乘之，六百而一也。今据周为之，若于圆堡昪，又以二十五乘之，三百一十四而一，则先得三圆亭矣。故以三百一十四为九百四十二而一，并除之。

　　淳风等按：依密率，以七乘之，二百六十四而一。〕

　　今有方锥，下方二丈七尺，高二丈九尺。问积几何？答曰：七千四十七尺。

　　术曰：下方自乘，以高乘之，三而一。

　　〔按：此术假令方锥下方二尺，高一尺，即四阳马。如术为之，用十二阳马成三方锥。故三而一，得方锥也。〕

　　今有圆锥，下周三丈五尺，高五丈一尺。问积几何？答曰：一千七百三十五尺一十二分尺之五。

　　〔于徽术，当积一千六百五十八尺三百一十四分尺之十三。

　　淳风等按：依密率，为积一千六百五十六尺八十八分尺之四十七。〕

　　术曰：下周自乘，以高乘之，三十六而一。

